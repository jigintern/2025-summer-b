<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width">
<title>掲示板一覧</title>

</head>

<body>
<h1>掲示板一覧</h1>

<ul id="bbs-list"></ul>

</body>

<script>
  const bbsContainer = document.getElementById("bbs-list");

        let bbsList = [];

        function renderBbs(threadList) {
            // いったん中身をクリア
            bbsContainer.innerHTML = "";
            // 配列の内容を順に表示
            if (threadList) {
                bbsList = threadList;
            }
            bbsList.forEach((p) => {
                const li = document.createElement("li"); // 投稿全体のdivを作成
                li.className = "bbs"; // CSS用クラスを付与
                li.innerHTML = `
          <a href="/thread.html?=${p.id}">${p.name}</a>
        `;
                bbsContainer.appendChild(li); // 親要素に追加
            });
        }

        // greetingを叩くためのjavascriptの実装
        window.onload = async () => {
            try {
                const response = await fetch("/thread-titles");
                const responseToJson = await response.json();
                const threadList = responseToJson.map((thread, i) => ({
                    id: i + 1,
                    name: thread.title,
                }));
                renderBbs(threadList);
            } catch (e) {
                console.log("error: ", e);
            }
        };
</script>
</html>
